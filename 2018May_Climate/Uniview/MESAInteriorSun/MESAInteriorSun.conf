mesh
{
    data SunData    ./modules/MESAInteriorSun/MESA_1M_pre_ms_to_wd.raw

    glslVersion 330

    enableTypeCheck true
    creaseAngle 180.0
    cullRadius 100000

	
    propertyCollection
    {
		__objectName__
        {
			vec1f simCoronaTimeFac 4. #factor to multiply with time to determine rate of change in corona
			vec1f simSurfaceTimeFac 0.004 #factor to multiply with time to determine rate of change in  convective cells
			vec1f simBindRealtime 0. #bind the time of this model to the actual time in Uniview (0 == no, 1 == yes)
			vec1f simUseTime 4000. #if simBindReadtime == 0, then this is the time to use (Myr)
			vec1f simRealtimestart 0. #Myr
			vec1f simRealtimeend 12000. #Myr
			vec1f simShowstart 0.0
			vec1f simDtmin 0.01

#for star
			# alpha multiplier
            vec1f Alpha 1
			
			#central temperature for exagerating the colors
			vec1f sTeff 5780.
			
			#factor to exagerate color (set to 1 for no exageration)
			vec1f Teffac 15
			
            # 0 cuts at the core. > 1 is no cut at all
            vec1f cutPlane 1
            
            # how quickly the corona disappears when going further from the star
            vec1f coronaFalloff 6.

            # 0 for no limb darkening
            vec1f limbDarkening 0.7

            vec1f brightness 1.5

            # controls the size of the convection cells
            vec1f convectionFrequency 1.

            # 0 means no convection
            vec1f convectionAmount 6.
			
            # controls the layers of the star interior
            # radius goes from 0 to 1
            vec3f ColorLayerConv 1 1 0
            vec3f ColorLayerRad  0 0 1
            vec3f ColorLayerHe  1 0 0



        }

    }


#####################################################
##Sun

	pass #Corona
	{
		passEnable true
		
		useDataObject SunData

		shader
		{
			type defaultMeshShader
			{	
				parameter1f drawSun 0
				parameter1f drawCorona 1
				
				
                stateManagerVar __objectName__.Alpha alpha
                stateManagerVar __objectName__.cutPlane cutPlane
                stateManagerVar __objectName__.coronaFalloff coronaFalloff
                stateManagerVar __objectName__.limbDarkening limbDarkening
                stateManagerVar __objectName__.brightness brightness
                stateManagerVar __objectName__.convectionFrequency convectionFrequency
                stateManagerVar __objectName__.convectionAmount convectionAmount
                stateManagerVar __objectName__.sTeff sTeff
                stateManagerVar __objectName__.Teffac Teffac
              
                stateManagerVar __objectName__.ColorLayerConv ColorLayerConv
                stateManagerVar __objectName__.ColorLayerRad ColorLayerRad
                stateManagerVar __objectName__.ColorLayerHe ColorLayerHe


				
				StateManagerVar __objectName__.simCoronaTimeFac simCoronaTimeFac
				StateManagerVar __objectName__.simSurfaceTimeFac simSurfaceTimeFac
				StateManagerVar __objectName__.simBindRealtime simBindRealtime
				StateManagerVar __objectName__.simUseTime simUseTime
				StateManagerVar __objectName__.simRealtimestart simRealtimestart  
				StateManagerVar __objectName__.simRealtimeend simRealtimeend 
				StateManagerVar __objectName__.simDtmin simdtmin
				
				texture bb ./modules/MESAInteriorSun/bb.png
				{
				}				

				vertexShader ./modules/MESAInteriorSun/shaders/star_shader.vs
				fragmentShader ./modules/MESAInteriorSun/shaders/star_shader.fs                
                geometryShader ./modules/MESAInteriorSun/shaders/MESAInteriorSun_geometry.glsl



				glState
				{
					UV_CULL_FACE_ENABLE false
                    UV_DEPTH_ENABLE false
                    UV_BLEND_ENABLE true
                    UV_WRITE_MASK_DEPTH true
                    UV_BLEND_FUNC GL_ONE GL_ONE_MINUS_SRC_ALPHA
				}				
             }
        }
    }	
    pass #Star
	{
		passEnable true
		
		useDataObject SunData

		shader
		{
			type defaultMeshShader
			{	
			
				parameter1f drawSun 1
				parameter1f drawCorona 0

                stateManagerVar __objectName__.Alpha alpha
                stateManagerVar __objectName__.cutPlane cutPlane
                stateManagerVar __objectName__.coronaFalloff coronaFalloff
                stateManagerVar __objectName__.limbDarkening limbDarkening
                stateManagerVar __objectName__.brightness brightness
                stateManagerVar __objectName__.convectionFrequency convectionFrequency
                stateManagerVar __objectName__.convectionAmount convectionAmount
                stateManagerVar __objectName__.sTeff sTeff
                stateManagerVar __objectName__.Teffac Teffac
              
                stateManagerVar __objectName__.ColorLayerConv ColorLayerConv
                stateManagerVar __objectName__.ColorLayerRad ColorLayerRad
                stateManagerVar __objectName__.ColorLayerHe ColorLayerHe


				
				StateManagerVar __objectName__.simCoronaTimeFac simCoronaTimeFac
				StateManagerVar __objectName__.simSurfaceTimeFac simSurfaceTimeFac
				StateManagerVar __objectName__.simBindRealtime simBindRealtime
				StateManagerVar __objectName__.simUseTime simUseTime
				StateManagerVar __objectName__.simRealtimestart simRealtimestart  
				StateManagerVar __objectName__.simRealtimeend simRealtimeend 
				StateManagerVar __objectName__.simDtmin simdtmin
				
				texture bb ./modules/MESAInteriorSun/bb.png
				{
				}				

				vertexShader ./modules/MESAInteriorSun/shaders/star_shader.vs
				fragmentShader ./modules/MESAInteriorSun/shaders/star_shader.fs                
                geometryShader ./modules/MESAInteriorSun/shaders/MESAInteriorSun_geometry.glsl



				glState
				{
					UV_CULL_FACE_ENABLE false
                    UV_DEPTH_ENABLE true
                    UV_BLEND_ENABLE true
                    UV_WRITE_MASK_DEPTH true
                    UV_BLEND_FUNC GL_SRC_ALPHA GL_ONE_MINUS_SRC_ALPHA
				}				
             }
        }
    }
	
	

		
	
	
}
